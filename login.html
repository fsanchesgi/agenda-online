<script>
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    errorBox.textContent = "";

    const emailValue = document.getElementById("email").value.trim();
    const passwordValue = document.getElementById("password").value;

    const { data, error } = await supabase.auth.signInWithPassword({
      email: emailValue,
      password: passwordValue
    });

    console.log("LOGIN RESPONSE:", data, error);

    const sessionCheck = await supabase.auth.getSession();
    console.log("SESSION AFTER LOGIN:", sessionCheck);

    if (error) {
      errorBox.textContent = error.message;
      return;
    }

    alert("Login OK, veja o console");
  });
</script>
