<section>
  <h2>Meus Estabelecimentos</h2>

  <div id="lista-estabelecimentos"></div>

  <h3>Novo Estabelecimento</h3>
  <input id="nome" placeholder="Nome" />
  <input id="cidade" placeholder="Cidade" />
  <input id="estado" placeholder="Estado (SP)" />
  <textarea id="descricao" placeholder="Descrição"></textarea>

  <button onclick="criarEstabelecimento()">Criar</button>
</section>

<script src="estabelecimento.js"></script>

<script>
async function carregarEstabelecimentos() {
  const session = await supabaseClient.auth.getSession();
  const userId = session.data.session.user.id;

  const { data } = await supabaseClient
    .from("estabelecimentos")
    .select("*")
    .eq("owner_id", userId);

  const container = document.getElementById("lista-estabelecimentos");
  container.innerHTML = "";

  data.forEach(e => {
    container.innerHTML += `
      <div class="card">
        <strong>${e.nome}</strong><br/>
        ${e.cidade} - ${e.estado}
      </div>
    `;
  });
}

carregarEstabelecimentos();
</script>
